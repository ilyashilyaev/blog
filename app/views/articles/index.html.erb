<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
  <body>

  <% if user_signed_in? %>
    <span>Здравствуйте, <%= current_user.email %></span>
    <%= link_to 'Выйти', destroy_user_session_path, :method => :delete %>
  <% else %>
    <%= link_to 'Войти', new_user_session_path %> или <%= link_to 'Зарегистрироваться', new_user_registration_path %>
  <% end %>

  <p class="notice"><%= notice %></p>
  <p class="alert"><%= alert %></p>
  <div class="jumbotron text-center">
    <h1>Listing articles</h1>
  </div>

      <%= link_to 'New article', new_article_path %><br>

        <%= form_tag(articles_path, method: "get") do %>
          <%= label_tag(:q, "Search article by title:") %>
          <%= text_field_tag(:q, params[:q]) %>
          <%= submit_tag("Search") %>
        <% end %>

      <table class="table">
         <tr>
           <th>User email</th>
           <th>User IP</th>
           <th>Title</th>
           <th>Text</th>
           <th>Rating</th>
           <th>Show Action</th>
           <th>Edit Action</th>
           <th>Rating Action</th>
           <th>Delete</th>
         </tr>
        <% @articles.each do |article| %>
          <tr>
            <td><%= article.user.email %></td>
            <td><%= article.creator_ip_address %></td>
            <td><%= article.title %></td>
            <td><%= article.text %></td>
            <td><%= article.rating %></td>
            <td><%= link_to 'Show', article_path(article) %></td>
            <td><%= link_to 'Edit', edit_article_path(article) %></td>
            <td><%= link_to 'Rating', new_article_rating_path(article) %></td>
            <td><%= link_to 'Destroy', article_path(article),
                            method: 'delete',
                            data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>

      </table>

      <h1>
        List of IP addresses from which several different authors have posted
      </h1>

      <table class="striped table-bordered">
        <tr>
          <th>IP</th>
          <th>User email</th>
        </tr>
          <% @list_ip.each do |ip, articles| %>
          <tr>
            <td>
              <%= ip %>
            </td>
            <td>
              <% articles.each do |article|   %>
                <p>
                  <%= article.user.email %>
                </p>
              <% end %>
            </td>
          </tr>
        <% end %>
      </table>

  </body>
</html>